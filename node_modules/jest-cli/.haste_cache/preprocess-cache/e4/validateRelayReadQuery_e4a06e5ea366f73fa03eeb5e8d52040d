'use strict';

























var validateRelayReadQuery=require('emptyFunction');

if(__DEV__){

(function(){










validateRelayReadQuery=function _validateRelayReadQuery(
queryNode,
options)
{
var validator=new RelayStoreReadValidator(options);
validator.visit(queryNode,{
children:{},
hash:null});};






function getAliasMap(
node,
parentAliasMap)
{
var applicationName=node.getApplicationName();
var hash=node.getShallowHash();var 
children=parentAliasMap.children;
if(!children.hasOwnProperty(applicationName)){
children[applicationName]={
children:{},
hash:hash};}else 

if(children[applicationName].hash!==hash){
console.error(
'`%s` is used as an alias more than once. Please use unique aliases.',
applicationName);}


return children[applicationName];}var 


RelayStoreReadValidator=function(_RelayQueryVisitor){babelHelpers.inherits(RelayStoreReadValidator,_RelayQueryVisitor);


function RelayStoreReadValidator(
options)
{babelHelpers.classCallCheck(this,RelayStoreReadValidator);var _this=babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(RelayStoreReadValidator).call(this));

_this.$RelayStoreReadValidator_traverseFragmentReferences=
options&&options.traverseFragmentReferences||false;return _this;}babelHelpers.createClass(RelayStoreReadValidator,[{key:'visitField',value:function visitField(



node,
parentAliasMap)
{
var aliasMap=getAliasMap(node,parentAliasMap);

if(node.isGenerated()){
return;}else 
if(!node.canHaveSubselections()){
return;}else 
if(node.isPlural()){
this.$RelayStoreReadValidator_readPlural(node,aliasMap);}else 
{

this.$RelayStoreReadValidator_readLinkedField(node,aliasMap);}}},{key:'visitFragment',value:function visitFragment(




node,
aliasMap)
{
if(this.$RelayStoreReadValidator_traverseFragmentReferences||!node.isContainerFragment()){
this.traverse(node,aliasMap);}}},{key:'$RelayStoreReadValidator_readPlural',value:function $RelayStoreReadValidator_readPlural(



node,aliasMap){var _this2=this;
node.getChildren().forEach(function(child){return _this2.visit(child,aliasMap);});}},{key:'$RelayStoreReadValidator_readLinkedField',value:function $RelayStoreReadValidator_readLinkedField(


node,aliasMap){
aliasMap=getAliasMap(node,aliasMap);
this.traverse(node,aliasMap);}}]);return RelayStoreReadValidator;}(require('RelayQueryVisitor'));})();}





module.exports=validateRelayReadQuery;