'use strict';var 







































URI=function(_URIBase){babelHelpers.inherits(URI,_URIBase);
function URI(uri){babelHelpers.classCallCheck(this,URI);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(URI).call(this,
uri||'',require('PHPQuerySerializer')));}babelHelpers.createClass(URI,[{key:'setPath',value:function setPath(









path){
this.path=path;
return babelHelpers.get(Object.getPrototypeOf(URI.prototype),'setPath',this).call(this,path);}},{key:'getPath',value:function getPath()







{
var path=babelHelpers.get(Object.getPrototypeOf(URI.prototype),'getPath',this).call(this);
if(path){
return path.replace(/^\/+/,'/');}

return path;}},{key:'setProtocol',value:function setProtocol(






protocol){
this.protocol=protocol;
return babelHelpers.get(Object.getPrototypeOf(URI.prototype),'setProtocol',this).call(this,protocol);}},{key:'setDomain',value:function setDomain(






domain){
this.domain=domain;
return babelHelpers.get(Object.getPrototypeOf(URI.prototype),'setDomain',this).call(this,domain);}},{key:'setPort',value:function setPort(






port){
this.port=port;
return babelHelpers.get(Object.getPrototypeOf(URI.prototype),'setPort',this).call(this,port);}},{key:'setFragment',value:function setFragment(






fragment){
this.fragment=fragment;
return babelHelpers.get(Object.getPrototypeOf(URI.prototype),'setFragment',this).call(this,fragment);}},{key:'valueOf',value:function valueOf()







{
return this.toString();}},{key:'isFacebookURI',value:function isFacebookURI()









{
if(__DEV__){
throw new Error(
'URI.prototype.isFacebookURI is deprecated, use isFacebookURI '+
'mirco-module instead');}


return require('isFacebookURI')(this);}},{key:'isLinkshimURI',value:function isLinkshimURI()






{
if(
require('isFacebookURI')(this)&&(

this.getPath()==='/l.php'||
this.getPath().indexOf('/si/ajax/l/')===0||
this.getPath().indexOf('/l/')===0||
this.getPath().indexOf('l/')===0))

{
return true;}

return false;}},{key:'getRegisteredDomain',value:function getRegisteredDomain()
























{
if(!this.getDomain()){
return '';}


if(!require('isFacebookURI')(this)){
return null;}


var parts=this.getDomain().split('.');
var index=parts.indexOf('facebook');
return parts.slice(index).join('.');}},{key:'getUnqualifiedURI',value:function getUnqualifiedURI()









{
var uri=new URI(this);
require('unqualifyURI')(uri);
return uri;}},{key:'getQualifiedURI',value:function getQualifiedURI()








{
return new URI(this).$URI_qualify();}},{key:'$URI_qualify',value:function $URI_qualify()





{
if(!this.getDomain()){
var current=URI();
this.setProtocol(current.getProtocol()).
setDomain(current.getDomain()).
setPort(current.getPort());}

return this;}},{key:'isSameOrigin',value:function isSameOrigin(














asThisURI){
var other=asThisURI||window.location.href;
if(!(other instanceof URI)){
other=new URI(other.toString());}


return require('areSameOrigin')(this,other);}},{key:'go',value:function go(








force_reload){
require('goURI')(this,force_reload);}},{key:'setSubdomain',value:function setSubdomain(

















subdomain){
var domains=this.$URI_qualify().getDomain().split('.');
if(domains.length<=2){
domains.unshift(subdomain);}else 
{
domains[0]=subdomain;}

return this.setDomain(domains.join('.'));}},{key:'getSubdomain',value:function getSubdomain()









{
if(!this.getDomain()){
return '';}


var domains=this.getDomain().split('.');
if(domains.length<=2){
return '';}else 
{
return domains[0];}}}],[{key:'isValidURI',value:function isValidURI(



uri){
return require('URIBase').isValidURI(uri,require('PHPQuerySerializer'));}}]);return URI;}(require('URIBase'));




babelHelpers.extends(URI,{














getRequestURI:function(respect_page_transitions,
suppress_warning){
respect_page_transitions=
respect_page_transitions===undefined||respect_page_transitions;

var PageTransitions=global.PageTransitions;
if(respect_page_transitions&&PageTransitions&&
PageTransitions.isInitialized()){
return PageTransitions.getCurrentURI(!!suppress_warning).
getQualifiedURI();}else 
{
return new URI(window.location.href);}},










getMostRecentURI:function(){
var PageTransitions=global.PageTransitions;
if(PageTransitions&&PageTransitions.isInitialized()){
return PageTransitions.getMostRecentURI().getQualifiedURI();}else 
{
return new URI(window.location.href);}},













getNextURI:function(){




var PageTransitions=global.PageTransitions;
if(PageTransitions&&PageTransitions.isInitialized()){
return PageTransitions._next_uri.getQualifiedURI();}else 
{
return new URI(window.location.href);}},








expression:/(((\w+):\/\/)([^\/:]*)(:(\d+))?)?([^#?]*)(\?([^#]*))?(#(.*))?/,




arrayQueryExpression:/^(\w+)((?:\[\w*\])+)=?(.*)/,













encodeComponent:function(raw){
return encodeURIComponent(raw).replace(/%5D/g,"]").replace(/%5B/g,"[");},














decodeComponent:function(encoded_s){
return decodeURIComponent(encoded_s.replace(/\+/g,' '));}});



if(__DEV__){
if(URI.prototype.__defineGetter__&&URI.prototype._defineSetter__){
URI.prototype.__defineGetter__('path',function(){
console.warn('URI: Do not access the path property directly '+
'use getPath(). Fix URI.prototype.');
return this.path;});

URI.prototype.__defineSetter__('path',function(path){
this.path=path;});

URI.prototype.__defineGetter__('protocol',function(){
console.warn('URI: Do not access the protocol property directly '+
'use getProtocol(). Fix URI.prototype.');
return this.protocol;});

URI.prototype.__defineSetter__('protocol',function(protocol){
this.protocol=protocol;});

URI.prototype.__defineGetter__('domain',function(){
console.warn('URI: Do not access the domain property directly '+
'use getDomain(). Fix URI.prototype.');
return this.domain;});

URI.prototype.__defineSetter__('domain',function(domain){
this.domain=domain;});

URI.prototype.__defineGetter__('port',function(){
console.warn('URI: Do not access the port property directly '+
'use getPort(). Fix URI.prototype.');
return this.port;});

URI.prototype.__defineSetter__('port',function(port){
this.port=port;});

URI.prototype.__defineGetter__('fragment',function(){
console.warn('URI: Do not access the fragment property directly '+
'use getFragment(). Fix URI.prototype.');
return this.fragment;});

URI.prototype.__defineSetter__('fragment',function(fragment){
this.fragment=fragment;});}}



module.exports=URI;