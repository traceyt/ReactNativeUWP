/**
 * Copyright (c) 2013-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * @providesModule RelayReadyState
 * @typechecks
 * 
 */

'use strict';var _extends = Object.assign || function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError('Cannot call a class as a function');}}

















/**
 * @internal
 */var 
RelayReadyState = (function () {




  function RelayReadyState(onReadyStateChange) {_classCallCheck(this, RelayReadyState);
    this._onReadyStateChange = onReadyStateChange;
    this._readyState = { 
      aborted: false, 
      done: false, 
      error: null, 
      ready: false, 
      stale: false };

    this._scheduled = false;}RelayReadyState.prototype.


  update = function update(nextReadyState) {var _this = this;
    var prevReadyState = this._readyState;
    if (prevReadyState.aborted) {
      return;}

    if (prevReadyState.done || prevReadyState.error) {
      if (!nextReadyState.aborted) {
        require('/Users/cpojer/Projects/relay/scripts/jest/../../node_modules/fbjs/lib/warning')(
        false, 
        'RelayReadyState: Invalid state change from `%s` to `%s`.', 
        JSON.stringify(prevReadyState), 
        JSON.stringify(nextReadyState));}


      return;}

    this._readyState = _extends({}, 
    prevReadyState, 
    nextReadyState);

    if (this._scheduled) {
      return;}

    this._scheduled = true;
    require('/Users/cpojer/Projects/relay/scripts/jest/../../node_modules/fbjs/lib/resolveImmediate')(function () {
      _this._scheduled = false;
      _this._onReadyStateChange(_this._readyState);});};return RelayReadyState;})();




module.exports = RelayReadyState;