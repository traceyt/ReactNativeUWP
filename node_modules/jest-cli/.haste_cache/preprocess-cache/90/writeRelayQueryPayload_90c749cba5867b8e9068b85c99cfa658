'use strict';



























function writeRelayQueryPayload(
writer,
query,
payload)
{
var store=writer.getRecordStore();
var recordWriter=writer.getRecordWriter();
var path=require('RelayQueryPath').create(query);

require('RelayNodeInterface').getResultsFromPayload(store,query,payload).
forEach(function(_ref){var dataID=_ref.dataID;var result=_ref.result;var rootCallInfo=_ref.rootCallInfo;
if(rootCallInfo){
recordWriter.putDataID(
rootCallInfo.storageKey,
rootCallInfo.identifyingArgKey,
dataID);}


writer.writePayload(query,dataID,result,path);});}



module.exports=require('RelayProfiler').instrument(
'writeRelayQueryPayload',
writeRelayQueryPayload);